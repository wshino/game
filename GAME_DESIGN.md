# 大航海時代ゲーム - ゲームデザインドキュメント

## 概要

15-16世紀の大航海時代を舞台にした、歴史的に考証された貿易シミュレーションゲーム。プレイヤーは商人として各港を巡り、商品を売買して富を築く。

## コアゲームメカニクス

### 1. 時間システム

ゲーム内時間は「日数」で管理される。時間が経過する要因：
- 港間の移動（距離と船の速度に依存）

時間経過による影響：
- 港の商品在庫が回復
- より長期的なゲームプレイ戦略が必要

### 2. 港システム

#### 港の規模分類（歴史的考証に基づく）

| 規模 | 最大在庫 | 回復速度 | 該当港 | 人口規模 |
|------|---------|---------|--------|---------|
| very_large | 150個 | 12個/日 | ヴェネツィア | 15-18万人 |
| large | 100個 | 8個/日 | リスボン、セビリア | 10万人以上 |
| medium | 60個 | 5個/日 | アレクサンドリア、カリカット、マラッカ | 数万人 |
| small | 30個 | 3個/日 | 長崎 | 数千人 |

#### 各港の歴史的背景

##### 1. ヴェネツィア（Venice）🇮🇹
- **規模**: very_large（最大規模港）
- **歴史的背景**:
  - 15世紀、人口15-18万人を擁するヨーロッパ最大級の商業都市
  - 地中海貿易を支配する海洋共和国
  - 東方（レヴァント）との貿易で繁栄
  - 香辛料、絹、織物などの集積地
- **ゲーム内の役割**: 最も在庫が豊富で、大量取引が可能な拠点

##### 2. リスボン（Lisbon）🇵🇹
- **規模**: large（大規模港）
- **歴史的背景**:
  - ポルトガルの首都
  - 15世紀末から16世紀、大航海時代の中心として急成長
  - エンリケ航海王子の時代から海外探検の拠点
  - 16世紀には人口10万人を超える
  - アフリカ、インド、ブラジルとの貿易で繁栄
- **ゲーム内の役割**: プレイヤーのスタート地点、主要貿易拠点

##### 3. セビリア（Seville）🇪🇸
- **規模**: large（大規模港）
- **歴史的背景**:
  - 16世紀、新大陸（アメリカ）との貿易を独占
  - カサ・デ・コントラタシオン（通商院）が設置され、全ての新大陸貿易を管理
  - 金、銀、タバコなどが流入
  - 16世紀半ばには人口10万人規模に成長
- **ゲーム内の役割**: ヨーロッパでの主要貿易拠点、高価な商品の取引

##### 4. アレクサンドリア（Alexandria）🇪🇬
- **規模**: medium（中規模港）
- **歴史的背景**:
  - 古代から続く地中海の要衝
  - 15世紀、マムルーク朝の支配下
  - 古代・中世の栄華からは衰退していたが、依然として重要
  - 香辛料貿易のルート上の中継地
  - 16世紀初頭にオスマン帝国に征服される
- **ゲーム内の役割**: 中東の中継拠点、香辛料の集積地

##### 5. カリカット（Calicut/Kozhikode）🇮🇳
- **規模**: medium（中規模港）
- **歴史的背景**:
  - インド西海岸（マラバール）の主要港
  - 15-16世紀、インド最大の香辛料（特に胡椒）貿易港
  - 1498年、ヴァスコ・ダ・ガマが到達
  - ザモリン（サモーリ）王の支配下で繁栄
  - アラブ商人とヨーロッパ商人の競合地
- **ゲーム内の役割**: 香辛料の主要産地、高利益率の取引が可能

##### 6. マラッカ（Malacca）🇲🇾
- **規模**: medium（中規模港）
- **歴史的背景**:
  - 15世紀、マラッカ王国の首都
  - マラッカ海峡を押さえる東西貿易の要衝
  - 香辛料、絹、陶器などが集まる国際貿易港
  - 1511年、ポルトガルのアルブケルケに征服される
  - 「東洋の富はマラッカに集まる」と言われた
- **ゲーム内の役割**: 東南アジアの交易拠点、多様な商品が集まる

##### 7. 長崎（Nagasaki）🇯🇵
- **規模**: small（小規模港）
- **歴史的背景**:
  - 16世紀半ばまでは小さな漁村
  - 1570年代、大村純忠がポルトガル貿易のために開港
  - 南蛮貿易の拠点として発展
  - 日本の銀と中国の絹の交易で繁栄
  - 当時の人口は数千人規模
- **ゲーム内の役割**: 極東の小規模港、銀と絹の特殊な取引機会

### 3. 在庫管理システム

#### 在庫の動的管理
- 各港の各商品には**現在在庫数**が存在
- プレイヤーが商品を購入すると、港の在庫が減少
- 在庫が0になると、その商品は購入不可
- 時間経過（日数）に応じて在庫が自動回復

#### 在庫回復の計算
```
新在庫数 = min(最大在庫, 現在在庫 + (回復速度 × 経過日数))
```

例：
- 中規模港（回復速度5個/日）で3日経過
- 現在在庫が40個の場合: 40 + (5 × 3) = 55個に回復
- 最大在庫は60個なので、55個（上限未満）

### 4. 距離と移動システム

#### 港間距離マトリクス（基本日数、速度1.0時）

|  | リスボン | セビリア | ヴェネツィア | アレクサンドリア | カリカット | マラッカ | 長崎 |
|---|---------|---------|------------|----------------|-----------|---------|------|
| リスボン | 0 | 2 | 5 | 7 | 15 | 20 | 30 |
| セビリア | 2 | 0 | 5 | 6 | 14 | 19 | 29 |
| ヴェネツィア | 5 | 5 | 0 | 3 | 12 | 17 | 27 |
| アレクサンドリア | 7 | 6 | 3 | 0 | 10 | 15 | 25 |
| カリカット | 15 | 14 | 12 | 10 | 0 | 5 | 15 |
| マラッカ | 20 | 19 | 17 | 15 | 5 | 0 | 10 |
| 長崎 | 30 | 29 | 27 | 25 | 15 | 10 | 0 |

#### 移動時間の計算
```
実際の移動日数 = 基本日数 ÷ 船の速度
```

例：
- リスボン→長崎（基本30日）
- カラベル船（速度1.0）: 30日
- 東インド会社船（速度2.0）: 15日

### 5. 船のアップグレードシステム

| 船名 | 積載量 | 速度 | 価格 | 歴史的背景 |
|------|-------|------|------|-----------|
| カラベル船 | 50 | 1.0x | 0G | 15世紀のポルトガルの小型帆船。機動性が高く、探検に適する |
| キャラック船 | 100 | 1.2x | 5,000G | 15-16世紀の大型商船。積載量が多く、遠洋航海が可能 |
| ガレオン船 | 150 | 1.5x | 15,000G | 16世紀のスペインの大型帆船。大量の貨物を運搬可能 |
| 東インド会社船 | 250 | 2.0x | 50,000G | 17世紀以降の最大級商船。巨大な貨物積載量と速度を誇る |

### 6. 商品システム

#### 商品一覧
| 商品 | 基本価格 | 説明 |
|------|---------|------|
| ワイン | 50G | ヨーロッパの主要輸出品 |
| 織物 | 80G | 羊毛織物、リネンなど |
| 香辛料 | 150G | 胡椒、シナモン、クローブなど。高利益率 |
| 絹 | 200G | 中国・日本からの高級品 |
| 金鉱石 | 300G | 新大陸やアフリカから |
| 陶器 | 120G | 中国の陶磁器 |
| 茶 | 100G | アジアからの輸入品 |
| 銀 | 250G | 日本や南米からの貴重品 |

#### 価格システム
各港には商品ごとに**価格乗数**が設定されている。

**最終価格の計算**:
```
最終価格 = 基本価格 × 港の価格乗数 × ランダム係数(0.9-1.1)
```

**価格乗数の例**:
- リスボンのワイン: 0.8（安い、生産地）
- 長崎のワイン: 1.8（高い、遠隔地）
- カリカットの香辛料: 0.6（安い、産地）
- リスボンの香辛料: 2.0（高い、輸入品）

**売買差額**:
- 購入価格: 最終価格
- 売却価格: 最終価格 × 0.8（20%のマージン）

### 7. ゲーム進行の戦略

#### 初期戦略
1. リスボンで安いワイン・織物を購入
2. 東方の港（カリカット、マラッカ、長崎）へ輸送して高値で売却
3. 現地で安い香辛料・絹を購入
4. ヨーロッパへ戻って高値で売却

#### 中期戦略
1. 利益を貯めて船をアップグレード
2. より大きな積載量で一度に多くの利益を得る
3. 速い船で移動時間を短縮し、効率を上げる

#### 上級戦略
1. 港の在庫状況を把握する
2. 在庫が回復するタイミングを計算
3. 複数の港を巡回する効率的なルートを確立
4. 小規模港（長崎）の在庫制限を考慮した取引

## 技術仕様

### データ構造

#### ゲームステート
```javascript
gameState = {
    gold: number,           // プレイヤーの所持金
    currentPort: string,    // 現在いる港のID
    inventory: {            // プレイヤーの所持品
        [goodId]: quantity
    },
    ship: {
        name: string,       // 船の名前
        capacity: number,   // 積載量
        speed: number       // 速度倍率
    },
    logs: string[],         // 行動ログ（最大50件）
    gameTime: number        // 経過日数
}
```

#### 港の在庫状態
```javascript
portInventory = {
    [portId]: {
        [goodId]: currentStock  // 現在の在庫数
    }
}
```

### セーブデータフォーマット
- localStorage使用
- キー: `'daikokaiGameSave'`
- 保存内容: `gameState` + `portInventory`
- フォーマット: JSON文字列

## 歴史的参考資料

### 参考文献（設定の根拠）
1. 15-16世紀の都市人口
   - ヴェネツィア: 15世紀ピーク時15-18万人（ヨーロッパ最大級）
   - リスボン: 16世紀に10万人超
   - セビリア: 16世紀に急成長、10万人規模

2. 貿易都市の重要性
   - ヴェネツィア: 地中海貿易の覇者
   - リスボン: インド航路開拓の拠点
   - セビリア: 新大陸貿易の独占港
   - マラッカ: 東西貿易の要衝
   - カリカット: 香辛料貿易の中心

3. 日本の特殊性
   - 長崎は16世紀後半まで小規模な港
   - 南蛮貿易により急速に発展
   - ゲーム設定上は小規模港として表現

### 歴史的年表（ゲーム背景）
- 1488年: バルトロメウ・ディアス、喜望峰到達
- 1492年: コロンブス、新大陸到達
- 1498年: ヴァスコ・ダ・ガマ、カリカット到達
- 1511年: ポルトガル、マラッカ征服
- 1543年: ポルトガル人、日本（種子島）到達
- 1571年: 長崎開港

## 今後の拡張案

### 短期的拡張
- [ ] イベントシステム（嵐、海賊など）
- [ ] 実績システム
- [ ] 取引履歴の統計表示

### 中期的拡張
- [ ] 新しい港の追加（イスタンブール、ゴア、マカオなど）
- [ ] 季節風システム（モンスーン貿易風）
- [ ] 船員管理システム

### 長期的拡張
- [ ] マルチプレイヤー対応
- [ ] 歴史イベントの実装
- [ ] 探検要素の追加

## 変更履歴

### v1.1.0 (2025-10-27)
- 港のサイズを歴史的考証に基づいて4段階に変更
- ヴェネツィアを最大規模港(very_large)に設定
- 長崎を小規模港(small)に変更
- 各港に歴史的背景の説明を追加
- ゲームデザインドキュメントを作成

### v1.0.0 (2025-10-27)
- 初版リリース
- 基本的な在庫管理システムと時間の概念を実装
